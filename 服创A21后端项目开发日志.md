# 服创A21后端项目开发日志

*written by lazy，polished by Gemini*



**阶段**：第一板块 - Spring Boot 基础 CRUD 实现

### 一、 项目初始化与环境配置

1. **工程创建**
   - 基于 Spring Boot 创建项目，构建工具选择 **Maven**。
   - 开发语言版本设定为 **Java 17** (LTS)。
   - Spring Boot 版本号选用 **3.5.5**。
2. **版本控制 (Git)**
   - 初始化本地 Git 仓库。
   - 建立与远程仓库的连接，完成首次提交。
3. **依赖管理 (Maven)**
   - **初始勾选**：MySQL Driver, Redis, Lombok。
   - **手动添加**：MyBatis-Plus, Spring Web 依赖 (参考既往配置，确保版本兼容性)。
   - **验证**：配置 `pom.xml` 后，成功启动 Spring Boot 应用并加载 MyBatis-Plus。

### 二、 数据库设计与连接配置

1. **数据库构建**
   - 根据业务需求设计表结构。
   - 在 DataGrip 中执行建库建表语句。
2. **配置文件 (`application.properties`)**
   - **数据库连接**：配置 URL、Username、Password。
   - **MyBatis-Plus 配置**：
     - 开启 **驼峰命名映射** (`map-underscore-to-camel-case`)：自动转换数据库下划线字段至 Java 驼峰属性。
     - 开启 **SQL 日志** (`stdOut`)：控制台打印 SQL 语句，便于调试。
   - **Redis 配置**：配置 Host、Port 等基础连接信息。

### 三、 核心 CRUD 模块开发

按照分层架构规范，依次完成以下模块编写：

1. **Entity (实体层)**：定义与数据库表对应的 POJO 类，配置主键策略与字段映射。
2. **Mapper (持久层)**：继承 MyBatis-Plus 的 `BaseMapper` 接口。
3. **Service (业务层)**：继承 `IService` 接口及 `ServiceImpl` 实现类。
4. **Controller (控制层)**：编写 RESTful 接口，处理 HTTP 请求。

### 四、 架构规范化与功能增强

为提升代码健壮性与可维护性，进行了以下优化：

1. **统一响应格式**
   - 创建 **状态码枚举** (`ResultCode`)。
   - 封装 **统一结果类** (`ApiResponse`)。
   - 重构 Controller，统一返回 `ApiResponse` 对象。
2. **分页功能**
   - 编写分页配置类 (`MybatisPlusConfig`)，注入 MyBatis-Plus 分页插件。
3. **自动化处理 (AOP)**
   - **自动填充**：实现 `MetaObjectHandler` 接口，自动处理 `createTime` 等字段的赋值。
   - **全局异常处理**：创建 `GlobalExceptionHandler`，使用 `@RestControllerAdvice` 统一捕获并处理系统异常。
4. **安全性与规范**
   - **参数校验**：引入 Validation 依赖，在实体类添加 `@NotBlank` 等注解，在 Controller 添加 `@Valid` 注解。
   - **消除魔法值**：引入枚举类 (`DataSourceEnum`, `TaskStatusEnum`) 替换代码中的硬编码数字。